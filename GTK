import gi
import subprocess
from gi.repository import Gtk, Gdk

gi.require_version('Gtk', '3.0')

def main():
    try:
        # Load the Glade file
        builder = Gtk.Builder()
        builder.add_from_file("path/to/your/file.glade")
        
        # Get the main window and drawing area
        window = builder.get_object("main_window")
        drawing_area = builder.get_object("drawing_area")
        
        # Show the window
        window.show_all()
        
        # Get the XID of the drawing area
        xid = drawing_area.get_window().get_xid()
        
        # Run mplayer with the XID embedded in the drawing area
        command = "mplayer tv:// -tv driver=v4l2:device=/dev/video0 -wid {}".format(xid)
        subprocess.Popen(command, shell=True)
        
        # Start the GTK main loop
        Gtk.main()
    
    except Exception as e:
        print("An error occurred: {}".format(e))
        # Handle specific errors or provide fallback options

if __name__ == "__main__":
    main()
